# /etc/interlink-autolauncher-plugin/targets.yml
targets:
  amd:
    host: amdlogin.bsc.es
    user: hpai
    ssh_key: /home/ubuntu/.ssh/id_rsa
    auth: key
    workdir_base: /gpfs/projects/bsc70/hpai/storage/data/tests/jobs
    containerdir_base: /gpfs/projects/bsc70/hpai/storage/data/tests/containers
    python: python3
    cluster: amd

  mn4:
    host: mn1.bsc.es
    user: hpai
    ssh_key: /home/ubuntu/.ssh/id_rsa
    auth: key
    workdir_base: /gpfs/projects/bsc70/hpai/storage/data/tests/jobs
    containerdir_base: /gpfs/projects/bsc70/hpai/storage/data/tests/containers
    python: python3
    cluster: mn4

  # NEW: MN5 (Accelerated) via username + password (for testing)
  mn5_acc_pw:
    host: alogin1.bsc.es              # adjust if needed
    user_env: MN5_ACC_USERNAME        # comes from secrets.env
    auth: password
    password_env: MN5_ACC_PASSWORD    # comes from secrets.env
    workdir_base: /gpfs/projects/bsc70/hpai/storage/data/tests/jobs   # adjust to your MN5 path
    containerdir_base: /gpfs/projects/bsc70/hpai/storage/data/tests/containers
    python: python3
    # Pick a launcher profile your autolauncher.py supports; 'mn4' is the safe, CPU-ish default
    cluster: mn4