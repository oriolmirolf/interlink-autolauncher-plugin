apiVersion: batch/v1
kind: Job
metadata:
  name: echo-hpc
  namespace: interlink
spec:
  template:
    metadata:
      annotations:
        interlink.autolauncher/mode: "hpc"
        interlink.autolauncher/target: "mn5_acc_pw"
        interlink.autolauncher/containerref: "demo-sbox"
        interlink.autolauncher/account: "bsc70"
        interlink.autolauncher/qos: "gp_bsccs"
        # interlink.autolauncher/partition: "acc"
        interlink.autolauncher/time: "00:10:00"
        interlink.autolauncher/gres: "gpu:1"
        # interlink.autolauncher/bind: "/gpfs/projects/bsc70/xyz:/mnt/xyz"
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker
      tolerations:
        - key: virtual-node.interlink/no-schedule
          operator: Exists
      restartPolicy: Never
      containers:
        - name: test
          image: busybox:1.36
          command: ["bash","-lc"]
          args: ["echo start-hpc; sleep 60; echo done-hpc"]
